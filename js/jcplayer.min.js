/*
 JCat Online Player - Player for Site (Icecast2 Online Radio)
 Copyright (c) 2016 Andrew Molchanov
 https://github.com/JoCat/JCPlayer
*/
$(document).ready(function(){$("#jcp-player").html('<i id="jcp-play"></i><i id="jcp-stop"></i><i id="jcp-reload"></i><i id="jcp-volume-down"></i><input id="jcp-volume" type="range" min="0" max="10" value="5" step="0.1" /><i id="jcp-volume-up"></i><span id="jcp-duration"></span><span id="jcp-track"></span>');var t=new Audio,c=!0;t.volume=.5,$("#jcp-player").on("click","#jcp-play",function(){1==c&&(t.setAttribute("src",src),c=!1),t.play(),$(this).attr("id","jcp-pause")}),$("#jcp-player").on("click","#jcp-pause",function(){t.pause(),$(this).attr("id","jcp-play")}),$("#jcp-stop").click(function(){t.pause(),t.setAttribute("src",""),c=!0,$("#jcp-pause").attr("id","jcp-play")}),$("#jcp-reload").click(function(){c=!1,t.pause(),t.setAttribute("src",src),t.play(),$("#jcp-play").attr("id","jcp-pause")}),$("#jcp-volume").mousemove(function(){t.volume=parseFloat(this.value/10)}),$("#jcp-volume").click(function(){$("#jcp-volume-off").attr("id","jcp-volume-down")}),$("#jcp-player").on("click","#jcp-volume-off",function(){t.volume=oldVolume,$(this).attr("id","jcp-volume-down"),$("#jcp-volume").val(10*oldVolume)}),$("#jcp-player").on("click","#jcp-volume-down",function(){oldVolume=t.volume,t.volume=0,$(this).attr("id","jcp-volume-off"),$("#jcp-volume").val(0)}),$("#jcp-volume-up").click(function(){t.volume=1,$("#jcp-volume-off").attr("id","jcp-volume-down"),$("#jcp-volume").val(10)}),setInterval(function(){s=String(parseInt(t.currentTime%60)),m=String(parseInt(t.currentTime/60%60)),h=parseInt(t.currentTime/3600),s.length<=1&&(s="0"+s),m.length<=1&&(m="0"+m),h>=1?$("#jcp-duration").html(h+":"+m+":"+s):$("#jcp-duration").html(m+":"+s)},1e3),timer=setTimeout(function e(){$.ajax({dataType:"jsonp",jsonp:"callback",jsonpCallback:"info",url:info,success:function(t){try{""==t.live.title?einfo=!0:einfo=!1}catch(c){einfo=!0}1==einfo?$("#jcp-track").html(t.nonstop.title):$("#jcp-track").html(t.live.title)},error:function(){$("#jcp-track").html("Ошибка загрузки! Возможно радио сейчас не работает...")}}),timer=setTimeout(e,1e3*tupd)},1e3*tupd)});