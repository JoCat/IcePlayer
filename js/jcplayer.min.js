/*
 JCat Online Player - Player for Site (Icecast2 Online Radio)
 Copyright (c) 2016 Andrew Molchanov
 https://github.com/JoCat/JCPlayer
*/
$(document).ready(function(){$("#jcp-player").html('<i id="jcp-play"></i><i id="jcp-pause" style="display:none;"></i><i id="jcp-stop"></i><i id="jcp-reload"></i><i id="jcp-volume-off" style="display:none;"></i><i id="jcp-volume-down"></i><input id="jcp-volume" type="range" min="0" max="10" value="5" step="0.1" /><i id="jcp-volume-up"></i><span id="jcp-duration"></span><span id="jcp-track"></span>'),audio=new Audio,playReload=!0,$("#jcp-play").click(function(){1==playReload&&(audio.setAttribute("src",src),playReload=!1),audio.play(),$("#jcp-play").css("display","none"),$("#jcp-pause").css("display","inline-block")}),$("#jcp-pause").click(function(){audio.pause(),$("#jcp-play").css("display","inline-block"),$("#jcp-pause").css("display","none")}),$("#jcp-stop").click(function(){audio.pause(),audio.setAttribute("src",""),playReload=!0,$("#jcp-play").css("display","inline-block"),$("#jcp-pause").css("display","none")}),$("#jcp-reload").click(function(){playReload=!1,audio.pause(),audio.setAttribute("src",src),audio.play(),$("#jcp-play").css("display","none"),$("#jcp-pause").css("display","inline-block")}),$("#jcp-volume").mousemove(function(){audio.volume=parseFloat(this.value/10)}),$("#jcp-volume-off").click(function(){audio.volume=oldVolume,$("#jcp-volume-off").css("display","none"),$("#jcp-volume-down").css("display","inline-block"),$("#jcp-volume").val(10*oldVolume)}),$("#jcp-volume-down").click(function(){oldVolume=audio.volume,audio.volume=0,$("#jcp-volume-down").css("display","none"),$("#jcp-volume-off").css("display","inline-block"),$("#jcp-volume").val(0)}),$("#jcp-volume-up").click(function(){audio.volume=1,$("#jcp-volume-off").css("display","none"),$("#jcp-volume-down").css("display","inline-block"),$("#jcp-volume").val(10)}),setInterval(function(){s=parseInt(audio.currentTime%60),m=parseInt(audio.currentTime/60%60),h=parseInt(audio.currentTime/60/60),s=String(s),m=String(m),s.length<=1&&(s="0"+s),m.length<=1&&(m="0"+m),h>=1?$("#jcp-duration").html(h+":"+m+":"+s):$("#jcp-duration").html(m+":"+s)},1e3),timer=setTimeout(function i(){$.ajax({dataType:"jsonp",jsonp:"callback",jsonpCallback:"info",url:info,success:function(i){try{""==i.live.title?einfo=!0:einfo=!1}catch(o){einfo=!0}1==einfo?$("#jcp-track").html(i.nonstop.title):$("#jcp-track").html(i.live.title)},error:function(){$("#jcp-track").html("Ошибка загрузки! Возможно радио сейчас не работает...")}}),timer=setTimeout(i,1e3*tupd)},1e3*tupd)});