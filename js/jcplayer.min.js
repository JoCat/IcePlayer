/*
 JCat Online Player v.2.0.0_beta1 - Player for Site (Icecast2 Online Radio)
 Copyright (c) 2016-2019 Andrew Molchanov
 https://github.com/JoCat/JCPlayer
*/
JCPlayer={server_address:"http://127.0.0.1:8000/",mounts_list:["live","nonstop"],stream_mount:"live",info_link:"current_track.xsl",time_update:10,style:"fixed",audio_object:{},player_stoped:!0,init:function(a){if("object"==typeof a){init_params_list=Object.keys(a);for(let b of init_params_list)JCPlayer[b]=a[b]}$("#jcp-player").html("<div id=\"jcp-player\" class=\""+JCPlayer.style+"\"><div id=\"player-el\"><i id=\"jcp-play\"></i><i id=\"jcp-stop\"></i><input id=\"jcp-volume\" type=\"range\" min=\"0\" max=\"100\" value=\"50\" step=\"1\"></div><span id=\"jcp-track\"></span></div>"),JCPlayer.audio_object=new Audio,JCPlayer.audio_object.volume=.5,$("#jcp-player").on("click","#jcp-play",JCPlayer.play),$("#jcp-player").on("click","#jcp-pause",JCPlayer.pause),$("#jcp-player").on("click","#jcp-stop",JCPlayer.stop),$("#jcp-player").on("mousemove","#jcp-volume",JCPlayer.change_volume),timer=setTimeout(function a(){$.ajax({dataType:"json",url:JCPlayer.server_address+JCPlayer.info_link,success:function(a){for(let b of JCPlayer.mounts_list)if(a[b]){$("#jcp-track").html(a[b].title);break}}}),timer=setTimeout(a,1e3*JCPlayer.time_update)},1e3*JCPlayer.time_update)},play:function(){!0===JCPlayer.player_stoped&&(JCPlayer.audio_object.setAttribute("src",JCPlayer.server_address+JCPlayer.stream_mount),JCPlayer.player_stoped=!1),JCPlayer.audio_object.play(),$(this).attr("id","jcp-pause")},pause:function(){JCPlayer.audio_object.pause(),$(this).attr("id","jcp-play")},stop:function(){JCPlayer.audio_object.pause(),JCPlayer.audio_object.setAttribute("src",""),JCPlayer.player_stoped=!0,$("#jcp-pause").attr("id","jcp-play")},change_volume:function(){JCPlayer.audio_object.volume=parseFloat(this.value/100)}};